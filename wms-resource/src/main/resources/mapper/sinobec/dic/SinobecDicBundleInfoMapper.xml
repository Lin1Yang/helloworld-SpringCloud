<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.inossem.wms.dao.sinobec.dic.SinobecDicBundleInfoMapper">
  <resultMap id="BaseResultMap" type="com.inossem.wms.model.sinobec.dic.SinobecDicBundleInfo">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Mar 23 11:10:44 CST 2020.
    -->
    <id column="bundle_code" jdbcType="VARCHAR" property="bundleCode" />
    <id column="shipping_ref" jdbcType="VARCHAR" property="shippingRef" />
    <result column="receipt_code" jdbcType="VARCHAR" property="receiptCode" />
    <result column="receipt_rid" jdbcType="VARCHAR" property="receiptRid" />
    <result column="receipt_type" jdbcType="INTEGER" property="receiptType" />
    <result column="heat_code" jdbcType="VARCHAR" property="heatCode" />
    <result column="skid_code" jdbcType="VARCHAR" property="skidCode" />
    <result column="mat_code" jdbcType="VARCHAR" property="matCode" />
    <result column="unit_code" jdbcType="VARCHAR" property="unitCode" />
    <result column="corp_code" jdbcType="VARCHAR" property="corpCode" />
    <result column="item_numb" jdbcType="VARCHAR" property="itemNumb" />
    <result column="lot_numb" jdbcType="VARCHAR" property="lotNumb" />
    <result column="input_date" jdbcType="TIMESTAMP" property="inputDate" />
    <result column="stock_status" jdbcType="VARCHAR" property="stockStatus" />
    <result column="create_user_id" jdbcType="INTEGER" property="createUserId" />
    <result column="modify_user_id" jdbcType="INTEGER" property="modifyUserId" />
    <result column="create_time" jdbcType="TIMESTAMP" property="createTime" />
    <result column="modify_time" jdbcType="TIMESTAMP" property="modifyTime" />
    <result column="vendor_code" property="vendorCode" jdbcType="VARCHAR"/>
	<result column="vendor_name" property="vendorName" jdbcType="VARCHAR"/>
	<result column="ext0" property="ext0" jdbcType="VARCHAR"/>
	<result column="ext1" property="ext1" jdbcType="VARCHAR"/>
	<result column="ext2" property="ext2" jdbcType="VARCHAR"/>
    <result column="ext3" property="ext3" jdbcType="VARCHAR"/>
    <result column="ext4" property="ext4" jdbcType="VARCHAR"/>
    <result column="ext5" property="ext5" jdbcType="VARCHAR"/>
    <result column="ext6" property="ext6" jdbcType="VARCHAR"/>
    <result column="ext7" property="ext7" jdbcType="VARCHAR"/>
    <result column="ext8" property="ext8" jdbcType="VARCHAR"/>
    <result column="ext9" property="ext9" jdbcType="VARCHAR"/>
    <result column="ext10" property="ext10" jdbcType="VARCHAR"/>
    <result column="ext11" property="ext11" jdbcType="VARCHAR"/>
    <result column="ext12" property="ext12" jdbcType="VARCHAR"/>
    <result column="ext13" property="ext13" jdbcType="VARCHAR"/>
    <result column="ext14" property="ext14" jdbcType="VARCHAR"/>
    <result column="ext15" property="ext15" jdbcType="VARCHAR"/>
  </resultMap>
  <resultMap id="BaseResultMapVo" extends="BaseResultMap" type="com.inossem.wms.model.sinobec.unload.UnLoadShelfUnpackVo">
  </resultMap>
  <sql id="Base_Column_List">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Mar 23 11:10:44 CST 2020.
    -->
    bundle_code, shipping_ref, receipt_code, receipt_rid, receipt_type, heat_code, skid_code,
    mat_code, unit_code, corp_code, item_numb, lot_numb, input_date, stock_status, create_user_id,
    modify_user_id, create_time, modify_time,vendor_code,vendor_name,ext0,ext1,ext2
  </sql>
  <select id = "selectCorpCodeByBundleCode" parameterType="string" resultType="string">
    select corp_code
    from sinobec_dic_bundle_info
    where bundle_code = #{bundleCode,jdbcType=VARCHAR}
  </select>

  <select id = "selectMatCodeByBundleCode" parameterType="string" resultType="string">
    select mat_code
    from sinobec_dic_bundle_info
    where bundle_code = #{bundleCode,jdbcType=VARCHAR}
  </select>

  <select id="selectBySotckId" parameterType="integer" resultMap="BaseResultMapVo">
    select b.*
    from sinobec_stock a
    inner join sinobec_dic_bundle_info b on a.bundle_code=b.bundle_code and a.shipping_ref=b.shipping_ref
    where   stock_id=#{stockid}
  </select>
  <select id="selectByPrimaryKey" parameterType="com.inossem.wms.model.sinobec.dic.SinobecDicBundleInfoKey" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Mar 23 11:10:44 CST 2020.
    -->
    select
    <include refid="Base_Column_List" />
    from sinobec_dic_bundle_info
    where bundle_code = #{bundleCode,jdbcType=VARCHAR}
      and shipping_ref = #{shippingRef,jdbcType=VARCHAR}
  </select>

  <select id="selectByMatAndBatch" parameterType="com.inossem.wms.model.sinobec.dic.SinobecDicBundleInfoKey" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Mar 23 11:10:44 CST 2020.
    -->
    select
    <include refid="Base_Column_List" />
    from sinobec_dic_bundle_info
    where mat_code = #{matCode,jdbcType=VARCHAR}
    <if test="lotNumb != null and lotNumb != ''">
      and lot_numb = #{lotNumb,jdbcType=VARCHAR}
    </if>
  </select>

  <select id="selectByMatAndVin" parameterType="com.inossem.wms.model.sinobec.dic.SinobecDicBundleInfoKey" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Mar 23 11:10:44 CST 2020.
    -->
    select
    <include refid="Base_Column_List" />
    from sinobec_dic_bundle_info
    where mat_code = #{matCode,jdbcType=VARCHAR}
      and ext0 = #{ext0,jdbcType=VARCHAR}
  </select>

  <select id="selectByMatAndEng" parameterType="com.inossem.wms.model.sinobec.dic.SinobecDicBundleInfoKey" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Mar 23 11:10:44 CST 2020.
    -->
    select
    <include refid="Base_Column_List" />
    from sinobec_dic_bundle_info
    where mat_code = #{matCode,jdbcType=VARCHAR}
      and ext1 = #{ext1,jdbcType=VARCHAR}
  </select>

  <delete id="deleteByPrimaryKey" parameterType="com.inossem.wms.model.sinobec.dic.SinobecDicBundleInfoKey">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Mar 23 11:10:44 CST 2020.
    -->
    delete from sinobec_dic_bundle_info
    where bundle_code = #{bundleCode,jdbcType=VARCHAR}
      and shipping_ref = #{shippingRef,jdbcType=VARCHAR}
  </delete>
  <insert id="insert" parameterType="com.inossem.wms.model.sinobec.dic.SinobecDicBundleInfo">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Mar 23 11:10:44 CST 2020.
    -->
    insert into sinobec_dic_bundle_info (bundle_code, shipping_ref, receipt_code,
      receipt_rid, receipt_type, heat_code,
      skid_code, mat_code, unit_code,
      corp_code, item_numb, lot_numb,
      input_date, stock_status, create_user_id,
      modify_user_id, create_time, modify_time
      )
    values (#{bundleCode,jdbcType=VARCHAR}, #{shippingRef,jdbcType=VARCHAR}, #{receiptCode,jdbcType=VARCHAR},
      #{receiptRid,jdbcType=VARCHAR}, #{receiptType,jdbcType=INTEGER}, #{heatCode,jdbcType=VARCHAR},
      #{skidCode,jdbcType=VARCHAR}, #{matCode,jdbcType=VARCHAR}, #{unitCode,jdbcType=VARCHAR},
      #{corpCode,jdbcType=VARCHAR}, #{itemNumb,jdbcType=VARCHAR}, #{lotNumb,jdbcType=VARCHAR},
      #{inputDate,jdbcType=TIMESTAMP}, #{stockStatus,jdbcType=VARCHAR}, #{createUserId,jdbcType=INTEGER},
      #{modifyUserId,jdbcType=INTEGER}, #{createTime,jdbcType=TIMESTAMP}, #{modifyTime,jdbcType=TIMESTAMP}
      )
  </insert>
  <insert id="insertSelective" parameterType="com.inossem.wms.model.sinobec.dic.SinobecDicBundleInfo">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Mar 23 11:10:44 CST 2020.
    -->
    insert into sinobec_dic_bundle_info
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="bundleCode != null">
        bundle_code,
      </if>
      <if test="shippingRef != null">
        shipping_ref,
      </if>
      <if test="receiptCode != null">
        receipt_code,
      </if>
      <if test="receiptRid != null">
        receipt_rid,
      </if>
      <if test="receiptType != null">
        receipt_type,
      </if>
      <if test="heatCode != null">
        heat_code,
      </if>
      <if test="skidCode != null">
        skid_code,
      </if>
      <if test="matCode != null">
        mat_code,
      </if>
      <if test="unitCode != null">
        unit_code,
      </if>
      <if test="corpCode != null">
        corp_code,
      </if>
      <if test="itemNumb != null">
        item_numb,
      </if>
      <if test="lotNumb != null">
        lot_numb,
      </if>
      <if test="inputDate != null">
        input_date,
      </if>
      <if test="stockStatus != null">
        stock_status,
      </if>
      <if test="createUserId != null">
        create_user_id,
      </if>
      <if test="modifyUserId != null">
        modify_user_id,
      </if>
      <if test="createTime != null">
        create_time,
      </if>
      <if test="modifyTime != null">
        modify_time,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="bundleCode != null">
        #{bundleCode,jdbcType=VARCHAR},
      </if>
      <if test="shippingRef != null">
        #{shippingRef,jdbcType=VARCHAR},
      </if>
      <if test="receiptCode != null">
        #{receiptCode,jdbcType=VARCHAR},
      </if>
      <if test="receiptRid != null">
        #{receiptRid,jdbcType=VARCHAR},
      </if>
      <if test="receiptType != null">
        #{receiptType,jdbcType=INTEGER},
      </if>
      <if test="heatCode != null">
        #{heatCode,jdbcType=VARCHAR},
      </if>
      <if test="skidCode != null">
        #{skidCode,jdbcType=VARCHAR},
      </if>
      <if test="matCode != null">
        #{matCode,jdbcType=VARCHAR},
      </if>
      <if test="unitCode != null">
        #{unitCode,jdbcType=VARCHAR},
      </if>
      <if test="corpCode != null">
        #{corpCode,jdbcType=VARCHAR},
      </if>
      <if test="itemNumb != null">
        #{itemNumb,jdbcType=VARCHAR},
      </if>
      <if test="lotNumb != null">
        #{lotNumb,jdbcType=VARCHAR},
      </if>
      <if test="inputDate != null">
        #{inputDate,jdbcType=TIMESTAMP},
      </if>
      <if test="stockStatus != null">
        #{stockStatus,jdbcType=VARCHAR},
      </if>
      <if test="createUserId != null">
        #{createUserId,jdbcType=INTEGER},
      </if>
      <if test="modifyUserId != null">
        #{modifyUserId,jdbcType=INTEGER},
      </if>
      <if test="createTime != null">
        #{createTime,jdbcType=TIMESTAMP},
      </if>
      <if test="modifyTime != null">
        #{modifyTime,jdbcType=TIMESTAMP},
      </if>
    </trim>
  </insert>

  <insert id="insertAll" parameterType="com.inossem.wms.model.sinobec.dic.SinobecDicBundleInfo">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Mar 23 11:10:44 CST 2020.
    -->
    insert into sinobec_dic_bundle_info (bundle_code, shipping_ref, receipt_code,
    receipt_rid, receipt_type, heat_code,
    skid_code, mat_code, unit_code,
    corp_code, item_numb, lot_numb,
    input_date, stock_status, create_user_id,
    modify_user_id, create_time, modify_time,
    ext0,ext1,ext2,ext3,ext4,ext5,ext6,ext7,ext8,ext9,ext10,ext11,
    ext12,ext13,ext14,ext15
    )
    values (#{bundleCode,jdbcType=VARCHAR}, #{shippingRef,jdbcType=VARCHAR}, #{receiptCode,jdbcType=VARCHAR},
    #{receiptRid,jdbcType=VARCHAR}, #{receiptType,jdbcType=INTEGER}, #{heatCode,jdbcType=VARCHAR},
    #{skidCode,jdbcType=VARCHAR}, #{matCode,jdbcType=VARCHAR}, #{unitCode,jdbcType=VARCHAR},
    #{corpCode,jdbcType=VARCHAR}, #{itemNumb,jdbcType=VARCHAR}, #{lotNumb,jdbcType=VARCHAR},
    #{inputDate,jdbcType=TIMESTAMP}, #{stockStatus,jdbcType=VARCHAR}, #{createUserId,jdbcType=INTEGER},
    #{modifyUserId,jdbcType=INTEGER}, #{createTime,jdbcType=TIMESTAMP}, #{modifyTime,jdbcType=TIMESTAMP},
    #{ext0,jdbcType=VARCHAR},#{ext1,jdbcType=VARCHAR},#{ext2,jdbcType=VARCHAR},#{ext3,jdbcType=VARCHAR},#{ext4,jdbcType=VARCHAR},#{ext5,jdbcType=VARCHAR},
    #{ext6,jdbcType=VARCHAR},#{ext7,jdbcType=VARCHAR},#{ext8,jdbcType=VARCHAR},#{ext9,jdbcType=VARCHAR},#{ext10,jdbcType=VARCHAR},#{ext11,jdbcType=VARCHAR},
    #{ext12,jdbcType=VARCHAR},#{ext13,jdbcType=VARCHAR},#{ext14,jdbcType=VARCHAR},#{ext15,jdbcType=VARCHAR}
    )
  </insert>

  <update id="updateByPrimaryKeySelective" parameterType="com.inossem.wms.model.sinobec.dic.SinobecDicBundleInfo">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Mar 23 11:10:44 CST 2020.
    -->
    update sinobec_dic_bundle_info
    <set>
      <if test="receiptCode != null">
        receipt_code = #{receiptCode,jdbcType=VARCHAR},
      </if>
      <if test="receiptRid != null">
        receipt_rid = #{receiptRid,jdbcType=VARCHAR},
      </if>
      <if test="receiptType != null">
        receipt_type = #{receiptType,jdbcType=INTEGER},
      </if>
      <if test="heatCode != null">
        heat_code = #{heatCode,jdbcType=VARCHAR},
      </if>
      <if test="skidCode != null">
        skid_code = #{skidCode,jdbcType=VARCHAR},
      </if>
      <if test="matCode != null">
        mat_code = #{matCode,jdbcType=VARCHAR},
      </if>
      <if test="unitCode != null">
        unit_code = #{unitCode,jdbcType=VARCHAR},
      </if>
      <if test="corpCode != null">
        corp_code = #{corpCode,jdbcType=VARCHAR},
      </if>
      <if test="itemNumb != null">
        item_numb = #{itemNumb,jdbcType=VARCHAR},
      </if>
      <if test="lotNumb != null">
        lot_numb = #{lotNumb,jdbcType=VARCHAR},
      </if>
      <if test="inputDate != null">
        input_date = #{inputDate,jdbcType=TIMESTAMP},
      </if>
      <if test="stockStatus != null">
        stock_status = #{stockStatus,jdbcType=VARCHAR},
      </if>
      <if test="createUserId != null">
        create_user_id = #{createUserId,jdbcType=INTEGER},
      </if>
      <if test="modifyUserId != null">
        modify_user_id = #{modifyUserId,jdbcType=INTEGER},
      </if>
      <if test="createTime != null">
        create_time = #{createTime,jdbcType=TIMESTAMP},
      </if>
      <if test="modifyTime != null">
        modify_time = #{modifyTime,jdbcType=TIMESTAMP},
      </if>
      <if test="matExt0 != null">
        mat_ext0 = #{stockStatus,jdbcType=VARCHAR},
      </if>
      <if test="matExt1 != null">
        mat_ext1 = #{stockStatus,jdbcType=VARCHAR},
      </if>
      <if test="matExt2 != null">
        mat_ext2 = #{stockStatus,jdbcType=VARCHAR},
      </if>
      <if test="matExt3 != null">
        mat_ext3 = #{stockStatus,jdbcType=VARCHAR},
      </if>
    </set>
    where bundle_code = #{bundleCode,jdbcType=VARCHAR}
      and shipping_ref = #{shippingRef,jdbcType=VARCHAR}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.inossem.wms.model.sinobec.dic.SinobecDicBundleInfo">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Mar 23 11:10:44 CST 2020.
    -->
    update sinobec_dic_bundle_info
    set receipt_code = #{receiptCode,jdbcType=VARCHAR},
      receipt_rid = #{receiptRid,jdbcType=VARCHAR},
      receipt_type = #{receiptType,jdbcType=INTEGER},
      heat_code = #{heatCode,jdbcType=VARCHAR},
      skid_code = #{skidCode,jdbcType=VARCHAR},
      mat_code = #{matCode,jdbcType=VARCHAR},
      unit_code = #{unitCode,jdbcType=VARCHAR},
      corp_code = #{corpCode,jdbcType=VARCHAR},
      item_numb = #{itemNumb,jdbcType=VARCHAR},
      lot_numb = #{lotNumb,jdbcType=VARCHAR},
      input_date = #{inputDate,jdbcType=TIMESTAMP},
      stock_status = #{stockStatus,jdbcType=VARCHAR},
      create_user_id = #{createUserId,jdbcType=INTEGER},
      modify_user_id = #{modifyUserId,jdbcType=INTEGER},
      create_time = #{createTime,jdbcType=TIMESTAMP},
      modify_time = #{modifyTime,jdbcType=TIMESTAMP}
    where bundle_code = #{bundleCode,jdbcType=VARCHAR}
      and shipping_ref = #{shippingRef,jdbcType=VARCHAR}
  </update>
  <!-- 批量新增或修改 -->
  <insert id="insertOrUpdateList" parameterType="java.util.List">
  	insert into sinobec_dic_bundle_info (bundle_code, receipt_code,
      receipt_rid, receipt_type, heat_code,
      skid_code, shipping_ref, mat_code,
      unit_code, corp_code, item_numb,
      lot_numb, input_date, stock_status,
      create_user_id, modify_user_id,
      vendor_code,vendor_name,ext0,ext1,ext2,ext3,ext4,ext5,ext6,ext7,ext8,ext9,ext10,ext11,ext12,ext13,ext14,ext15
      )
    values
    <foreach collection="list" open="" close="" separator="," item="item">

   	( #{item.bundleCode,jdbcType=VARCHAR}, #{item.receiptCode,jdbcType=VARCHAR},
      #{item.receiptRid,jdbcType=VARCHAR}, #{item.receiptType,jdbcType=INTEGER}, #{item.heatCode,jdbcType=VARCHAR},
      #{item.skidCode,jdbcType=VARCHAR}, #{item.shippingRef,jdbcType=VARCHAR}, #{item.matCode,jdbcType=VARCHAR},
      #{item.unitCode,jdbcType=VARCHAR}, #{item.corpCode,jdbcType=VARCHAR}, #{item.itemNumb,jdbcType=VARCHAR},
      #{item.lotNumb,jdbcType=VARCHAR}, #{item.inputDate,jdbcType=TIMESTAMP}, #{item.stockStatus,jdbcType=VARCHAR},
      #{item.createUserId,jdbcType=INTEGER}, #{item.modifyUserId,jdbcType=INTEGER},
      #{item.vendorCode,jdbcType=VARCHAR},#{item.vendorName,jdbcType=VARCHAR},
      #{item.ext0,jdbcType=VARCHAR},#{item.ext1,jdbcType=VARCHAR},#{item.ext2,jdbcType=VARCHAR},
      #{item.ext3,jdbcType=VARCHAR},#{item.ext4,jdbcType=VARCHAR},#{item.ext5,jdbcType=VARCHAR},
      #{item.ext6,jdbcType=VARCHAR},#{item.ext7,jdbcType=VARCHAR},#{item.ext8,jdbcType=VARCHAR},
      #{item.ext9,jdbcType=VARCHAR},
      #{item.ext10,jdbcType=VARCHAR},
      #{item.ext11,jdbcType=VARCHAR},
      #{item.ext12,jdbcType=VARCHAR},
      #{item.ext13,jdbcType=VARCHAR},
      #{item.ext14,jdbcType=VARCHAR},
      #{item.ext15,jdbcType=VARCHAR}
      )

    </foreach>
     ON  DUPLICATE  KEY  UPDATE
      receipt_code = values(receipt_code),
	  receipt_rid = values(receipt_rid),
      receipt_type = values(receipt_type),
      heat_code = values(heat_code),
      skid_code = values(skid_code),
      mat_code = values(mat_code),
      unit_code = values(unit_code),
      corp_code = values(corp_code),
      item_numb = values(item_numb),
      lot_numb = values(lot_numb),
      input_date = values(input_date),
      stock_status = values(stock_status),
      create_user_id = values(create_user_id),
      modify_user_id = values(modify_user_id),
      vendor_code = values(vendor_code),
      vendor_name = values(vendor_name),
      ext0 = values(ext0),
      ext1 = values(ext1),
      ext2 = values(ext2),
      ext3 = values(ext3),
      ext4 = values(ext4),
      ext5 = values(ext5),
      ext6 = values(ext6),
      ext7 = values(ext7),
      ext8 = values(ext8),
      ext9 = values(ext9),
      ext10 = values(ext10),
      ext11 = values(ext11),
      ext12 = values(ext12),
      ext13 = values(ext13),
      ext14 = values(ext14),
      ext15 = values(ext15)
  </insert>

  <select id="findBundleCode" parameterType="java.lang.String" resultType="java.lang.Integer">
    select COUNT(*)
    from sinobec_dic_bundle_info
    where bundle_code = #{bundleCode,jdbcType=VARCHAR}
  </select>
</mapper>
